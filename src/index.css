/*
 * src/index.css
 *
 * Este es el archivo de estilos principal para Tailwind CSS v4.
 * En v4, solo necesitamos importar Tailwind CSS.
 */
@import "tailwindcss";

/* Capa base: asegurar que el tema por clase en <html> gane prioridad frente a media queries externas
   y estilos inyectados por extensiones. Solo se fija fondo/texto base; el resto lo manejan las clases Tailwind. */
@layer base {
  /* Variables de tema con mayor jerarquía (prioridad por clase en :root) */
  :root {
    --bg: #ffffff;       /* fondo base light */
    --fg: #111827;       /* texto base light (gray-900) */
    --panel: #ffffff;    /* superficies claras */
    --panel-dark: #1f2937; /* gray-800 aprox */
    --border: #e5e7eb;   /* gray-200 */

    /* Inputs - Light */
    --input-bg: #F3F4F6;     /* gray-100 */
    --input-fg: #111827;     /* gray-900 */
    --input-ph: #6B7280;     /* gray-500 */
    --input-border: #D1D5DB; /* gray-300 */

    /* Tipografía - Light */
    --text-primary: #111827;   /* gray-900 */
    --text-secondary: #374151; /* gray-700 */
    --text-muted: #6B7280;     /* gray-500 */
    --heading: #0F172A;        /* slate-900 para títulos */
    --link: #1D4ED8;           /* blue-700 */
  }
  :root.dark {
    --bg: #111827;       /* fondo base dark (gray-900) */
    --fg: #e5e7eb;       /* texto base dark (gray-200) */
    --panel: #1f2937;    /* superficies oscuras (gray-800) */
    --panel-dark: #111827;
    --border: #374151;   /* gray-700 */

    /* Inputs - Dark */
    --input-bg: #1F2937;     /* gray-800 */
    --input-fg: #E5E7EB;     /* gray-200 */
    --input-ph: #9CA3AF;     /* gray-400 */
    --input-border: #374151; /* gray-700 */

    /* Tipografía - Dark */
    --text-primary: #E5E7EB;   /* gray-200 */
    --text-secondary: #D1D5DB; /* gray-300 */
    --text-muted: #9CA3AF;     /* gray-400 */
    --heading: #F8FAFC;        /* slate-50 */
    --link: #93C5FD;           /* blue-300 */
  }

  /* Asegurar que el tema por clase gobierna el canvas */
  html {
    background-color: var(--bg);
    color: var(--fg); /* Texto global: SIEMPRE usa var(--fg) */
  }
  html.dark {
    background-color: var(--bg);
    color: var(--fg); /* Texto global: SIEMPRE usa var(--fg) */
  }

  /* En caso de que alguna hoja externa aplique colores por media query,
     reforzamos el body para heredar del html y evitar parpadeos. */
  body {
    background-color: inherit;
    color: var(--fg); /* Fijar texto global en todo el app */
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
    font-weight: 400;
  }

  /* Tipografía global con variables: títulos, secundarios y muted */
  h1, h2, h3 {
    color: var(--heading);
    font-weight: 800;
    letter-spacing: -0.015em; /* tracking-tight */
  }
  h4, h5, h6 {
    color: var(--heading);
    font-weight: 700;
  }
  .text-secondary {
    color: var(--text-secondary);
  }
  .text-muted, .muted {
    color: var(--text-muted);
  }
  a {
    color: var(--link);
    text-decoration: underline;
    text-underline-offset: 2px;
  }
  a:hover {
    text-decoration-thickness: 2px;
  }
}
@layer utilities {
  /* Utilidades de texto (alias) removidas para evitar error de Tailwind v4 con utilities personalizadas */

  /* Anchuras fijas convencionales para columnas compactas (precios, cantidades, etc.) */
  .w-col-xxs { width: 36px; }
  .w-col-xs  { width: 45px; }  /* recomendada para precio 0.00 */
  .w-col-sm  { width: 60px; }
  .w-col-md  { width: 80px; }
  .w-col-lg  { width: 120px; }

  /* Contenedores optimizados (densidad convencional) */
  .container-compact { max-width: 1100px; margin-left: auto; margin-right: auto; padding-left: 0.75rem; padding-right: 0.75rem; }
  .section-compact   { padding-top: 0.75rem; padding-bottom: 0.75rem; }
}

@layer components {
  /* Botón base y primario. El padding más generoso se define en .btn-primary */
  /* Reemplazar alias 'btn' por utilidades explícitas para Tailwind v4 (evita unknown utility `btn`) */
  .btn {
    @apply inline-flex items-center justify-center font-semibold rounded-lg shadow-md transition-all duration-200
           focus:outline-none focus:ring-2 disabled:opacity-60 disabled:cursor-not-allowed px-4 py-2;
  }
  .btn-primary {
    @apply text-white;
  }

  /* Cards / Panels reutilizables */
  .card {
    /* Usar variables para respetar el tema global */
    /* Padding objetivo cercano a 25px: 6 (px-1.5) + 16 (p-4) + 4 (ajuste) ~= 26px visual. 
       En Tailwind, el paso más cercano estable es p-6 (24px). Optamos por p-6 equivalente en densidad media,
       pero para compactar lo hacemos con p-5 (~20px) + pb-6 (~24px). */
    @apply shadow-md rounded-lg px-5 py-6 border;
    background-color: var(--panel);
    border-color: var(--border);
    color: var(--fg); /* Texto global unificado */
  }

  /* Sección reutilizable con estilo de card para contenedores principales */
  .section-card {
    /* Meta ~25px: usamos px-5 (20px horizontales) y py-6 (~24px vertical) para sensación ~25px, 
       y gap inferior 20-24px según viewport */
    @apply shadow-md rounded-lg px-5 py-6 border mb-5 md:mb-4;
    background-color: var(--panel);
    border-color: var(--border);
    color: var(--fg);
  }

  /* Inputs base con buen contraste y estados */
  /* Nota: En Tailwind v4 no existen utilidades personalizadas fuera del build; evitamos clases no registradas.
     Reemplazamos la alias '.input' por utilidades explícitas para no provocar 'unknown utility class `input`'. */
  /* Inputs base: alto contraste (fondo claro, texto oscuro) */
  /* Inputs FIJOS en todo el app (según indicación):
     - Fondo: gris medio claro (#F3F4F6)
     - Texto: gris oscuro (#111827)
     - Placeholder: gris medio (#6B7280)
     - Borde: gris suave (#D1D5DB)
     - Ring por módulo (clases input-module-*) permanece igual */
  .input {
    @apply block w-full rounded-md ring-1 ring-inset shadow-sm
           focus:outline-none focus:ring-2 focus:ring-inset
           sm:text-xs px-2; /* densidad uniforme */;
    height: 20px;          /* altura uniforme */
    line-height: 1;        /* alinear verticalmente */

    background-color: #F3F4F6; /* FIJO */
    color: #111827;            /* FIJO */
    border: 1px solid #D1D5DB; /* FIJO */
    ring-color: #D1D5DB;       /* FIJO */
  }
  .input::placeholder {
    color: #6B7280; /* FIJO */
    opacity: 1;
  }

  /* Etiquetas/labels y textos auxiliares en formularios (dark por defecto) */
  .form-label {
    /* Texto global unificado */
    @apply block text-sm font-medium;
    color: var(--fg);
  }
  .form-help {
    @apply text-xs;
    color: var(--text-muted);
  }
  .form-section-title {
    /* Compactar ligeramente el espacio de títulos dentro de cards/secciones */
    @apply text-lg font-bold mb-2;
    color: var(--fg);
  }
  /* Subtítulos H2 por sección también claros por defecto */
  h2 {
    color: inherit;
  }
  /* Variante de error para inputs */
  .input-error {
    @apply border-red-500 ring-2 ring-red-500;
  }
  
  /* Estilo para menús desplegables, consistente con los inputs */
  /* Select alineado al input base para legibilidad */
  .select {
    @apply block w-full rounded-md ring-1 ring-inset shadow-sm appearance-none
           focus:outline-none focus:ring-2 focus:ring-inset sm:text-xs;
    height: 20px;          /* altura uniforme */
    line-height: 1;        /* alinear verticalmente */
    padding-right: 2rem;   /* Espacio para la flecha */
    /* FIJO como input */
    background-color: #F3F4F6;
    color: #111827;
    border: 1px solid #D1D5DB;

    /* Flecha por defecto (light) */
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.25em 1.25em;
  }
  .dark .select {
    /* Flecha diferente para el modo oscuro para mantener el contraste */
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  }

  /* Accesos directos neutrales para superficies y texto si se desean en contenedores generales */
  .surface {
    background-color: var(--panel);
    color: var(--fg); /* Texto global unificado */
  }
  .surface-contrast {
    background-color: color-mix(in oklab, var(--panel) 90%, #000 10%);
  }
  .surface-border {
    @apply border;
    border-color: var(--border);
  }

  /* Navbar oscuro para cohesión con fondo */
  .navbar {
    /* Fondo según tema + suficiente contraste con el texto */
    @apply sticky top-0 z-40 w-full backdrop-blur border-b;
    /* En light usamos un panel claro con leve transparencia para distinguir del contenido */
    background-color: color-mix(in oklab, var(--panel) 90%, transparent);
    border-color: var(--border);
    color: var(--fg); /* Texto global unificado */
  }
  /* Asegurar contraste de enlaces/acciones dentro de navbar */
  .navbar a,
  .navbar button {
    color: var(--fg); /* Enlaces/acciones con texto global */
  }
  /* En dark elevamos ligeramente el contraste del texto y los íconos */
  .dark .navbar {
    background-color: color-mix(in oklab, var(--panel-dark) 92%, transparent);
    color: var(--fg);
  }
  .dark .navbar a,
  .dark .navbar button {
    color: var(--fg);
  }
  .navbar-inner {
    /* Reemplazo de utility personalizada por utilidades Tailwind válidas */
    @apply max-w-[1100px] mx-auto px-3 h-14 flex items-center justify-between;
  }
  .navbar-title {
    @apply font-extrabold text-lg;
    color: var(--fg); /* Unificar a texto global */
  }
  .navbar-actions {
    @apply flex items-center gap-2;
    color: var(--fg);
  }

  /* Botones primarios por módulo con paleta requerida:
     - Devoluciones: rojo
     - Pedido: azul
     - Inventario: verde
     - Comparación: naranja */
  .btn-module-devoluciones {
    @apply inline-flex items-center justify-center font-semibold rounded-lg shadow-md transition-all duration-200
           focus:outline-none focus:ring-2 disabled:opacity-60 disabled:cursor-not-allowed px-4 py-2
           text-white bg-red-600 hover:bg-red-700 focus:ring-red-600;
  }
  .btn-outline-devoluciones {
    @apply inline-flex items-center justify-center font-semibold rounded-lg px-4 py-2
           text-red-300 border border-red-500/40 hover:border-red-400 focus:outline-none focus:ring-2 focus:ring-red-400;
  }
  .btn-module-pedido {
    @apply inline-flex items-center justify-center font-semibold rounded-lg shadow-md transition-all duration-200
           focus:outline-none focus:ring-2 disabled:opacity-60 disabled:cursor-not-allowed px-4 py-2
           text-white bg-blue-600 hover:bg-blue-700 focus:ring-blue-600;
  }
  .btn-outline-pedido {
    @apply inline-flex items-center justify-center font-semibold rounded-lg px-4 py-2
           text-blue-300 border border-blue-500/40 hover:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400;
  }
  .btn-module-inventario {
    @apply inline-flex items-center justify-center font-semibold rounded-lg shadow-md transition-all duration-200
           focus:outline-none focus:ring-2 disabled:opacity-60 disabled:cursor-not-allowed px-4 py-2
           text-white bg-emerald-600 hover:bg-emerald-700 focus:ring-emerald-600;
  }
  .btn-outline-inventario {
    @apply inline-flex items-center justify-center font-semibold rounded-lg px-4 py-2
           text-emerald-300 border border-emerald-500/40 hover:border-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-400;
  }
  .btn-module-comparador {
    @apply inline-flex items-center justify-center font-semibold rounded-lg shadow-md transition-all duration-200
           focus:outline-none focus:ring-2 disabled:opacity-60 disabled:cursor-not-allowed px-4 py-2
           text-white bg-amber-600 hover:bg-amber-700 focus:ring-amber-600;
  }
  .btn-outline-comparador {
    @apply inline-flex items-center justify-center font-semibold rounded-lg px-4 py-2
           text-amber-300 border border-amber-500/40 hover:border-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-400;
  }

  /* Inputs con alto contraste y borde/ring por módulo
     - Fondo gris claro, texto gris oscuro, placeholder gris medio, borde suave */
  /* Inputs de alto contraste para fondo oscuro: texto claro, fondo gris-800, bordes coloreados por módulo */
  /* Inputs por módulo: fondo claro para máxima legibilidad en tema dark + borde inferior 2px del color del módulo */
  .input-module-devoluciones {
    @apply block w-full rounded-md bg-gray-50 text-gray-900 placeholder-gray-500
           border border-gray-300 ring-1 ring-inset ring-gray-300 shadow-sm
           focus:outline-none focus:ring-2 focus:ring-inset focus:ring-red-500 focus:border-red-500 sm:text-xs;
    height: 20px;
    line-height: 1;
    padding: 1px 4px;
    background-image: linear-gradient(rgb(239,68,68), rgb(239,68,68));
    background-repeat: no-repeat;
    background-size: 100% 2px;
    background-position: left calc(100% - 0px);
  }
  .input-module-pedido {
    @apply block w-full rounded-md bg-gray-50 text-gray-900 placeholder-gray-500
           border border-gray-300 ring-1 ring-inset ring-gray-300 shadow-sm
           focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 focus:border-blue-500 sm:text-xs;
    height: 20px;
    line-height: 1;
    padding: 1px 4px;
    background-image: linear-gradient(rgb(59,130,246), rgb(59,130,246));
    background-repeat: no-repeat;
    background-size: 100% 2px;
    background-position: left calc(100% - 0px);
  }
  .input-module-inventario {
    @apply block w-full rounded-md bg-gray-50 text-gray-900 placeholder-gray-500
           border border-gray-300 ring-1 ring-inset ring-gray-300 shadow-sm
           focus:outline-none focus:ring-2 focus:ring-inset focus:ring-emerald-500 focus:border-emerald-500 sm:text-xs;
    height: 20px;
    line-height: 1;
    padding: 1px 4px;
    background-image: linear-gradient(rgb(16,185,129), rgb(16,185,129));
    background-repeat: no-repeat;
    background-size: 100% 2px;
    background-position: left calc(100% - 0px);
  }
  /* Inputs de comparador:
     - En formulario superior (marcas, colaborador, fecha): alto 20px y ancho responsive (ocupan el contenedor).
     - En tabla de precios (celdas de comparación): usar adicionalmente la clase .price-cell-45 para forzar 45x20. */
  .input-module-comparador {
    @apply block w-full rounded-md bg-gray-50 text-gray-900 align-middle
           border border-gray-300 ring-1 ring-inset ring-gray-300 shadow-sm
           focus:outline-none focus:ring-2 focus:ring-inset focus:ring-amber-500 focus:border-amber-500
           text-xs;
    height: 20px;          /* alto fijo */
    line-height: 18px;     /* alinear texto dentro de 20px */
    padding: 1px 4px;      /* padding compacto */
    /* Placeholder con mayor contraste y guía de formato monetario */
    &::placeholder { color: rgb(107 114 128); opacity: 1; } /* gray-500 */
    background-image: linear-gradient(rgb(245,158,11), rgb(245,158,11));
    background-repeat: no-repeat;
    background-size: 100% 2px;
    background-position: left calc(100% - 0px);
  }

  /* Utilizar esta clase adicional SOLO en celdas de precios de la tabla del comparador para 45x20 exactos */
  .price-cell-45 {
    width: 45px;
    min-width: 45px;
    max-width: 45px;
  }
  /* Paleta de página y títulos por módulo (fondos suaves y títulos con alto contraste) */
  /* Modo oscuro por defecto en todas las páginas con contraste adecuado.
     Fondo oscuro estable y acentos de cada módulo en títulos/botones/inputs. */
  .page-devoluciones { @apply min-h-screen bg-gray-900 py-3;   /* Reel (carrusel) en Home, orden rombo responsive */
  .reel {
    @apply relative overflow-hidden;
  }
  .reel-track {
    @apply flex gap-4 snap-x snap-mandatory overflow-x-auto px-4 py-6;
    scroll-behavior: smooth;
  }
  /* Ocultar barra de scroll en móviles (carrusel) sin romper accesibilidad teclado */
  .no-scrollbar {
    -ms-overflow-style: none; /* IE y Edge */
    scrollbar-width: none; /* Firefox */
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none; /* Chrome/Safari/Opera */
  }
  .reel-card {
    @apply min-w-[280px] snap-center rounded-2xl p-6 shadow-md bg-gray-800/90 border border-gray-700 text-gray-100 transition-all hover:scale-[1.02] hover:shadow-lg;
    -webkit-backdrop-filter: blur(2px);
    backdrop-filter: blur(2px);
  }
  .reel-card--devoluciones { @apply outline-none ring-0; }
  .reel-card--pedido       { @apply outline-none ring-0; }
  .reel-card--inventario   { @apply outline-none ring-0; }
  .reel-card--comparador   { @apply outline-none ring-0; }
  .reel-card__title { @apply text-lg md:text-xl font-extrabold mb-1.5 md:mb-2; }
  .reel-card__desc  { @apply text-sm; color: var(--fg); opacity: 0.8; } /* Descripción con leve atenuación pero texto global */

  /* Orden rombo (grid) para pantallas grandes */
  .diamond-grid {
    @apply grid gap-4 md:gap-6 px-3 md:px-4 py-6 md:py-8;
    grid-template-columns: repeat(12, minmax(0, 1fr));
  }
  .diamond-a { grid-column: 4 / span 6; }
  .diamond-b { grid-column: 2 / span 6; }
  .diamond-c { grid-column: 7 / span 6; }
  .diamond-d { grid-column: 4 / span 6; }
  @media (min-width: 1024px) {
    .diamond-grid { grid-template-rows: repeat(3, minmax(0, 1fr)); }
    .diamond-a { grid-row: 1; }
    .diamond-b { grid-row: 2; }
    .diamond-c { grid-row: 2; }
    .diamond-d { grid-row: 3; }
  }
}
  .page-pedido      { @apply min-h-screen py-3; }
  .page-inventario  { @apply min-h-screen py-3; }
  .page-comparador  { @apply min-h-screen py-3; }

  /* Títulos con alto contraste sobre fondo oscuro y subrayado de color del módulo (4px) */
  .title-devoluciones { @apply inline-block relative; color: var(--heading); }
  .title-devoluciones::after { content: ""; position: absolute; left: 0; width: 100%; height: 4px; background: rgb(239 68 68); bottom: -6px; }
  .title-pedido       { @apply inline-block relative; color: var(--heading); }
  .title-pedido::after { content: ""; position: absolute; left: 0; width: 100%; height: 4px; background: rgb(59 130 246); bottom: -6px; }
  .title-inventario   { @apply inline-block relative; color: var(--heading); }
  .title-inventario::after { content: ""; position: absolute; left: 0; width: 100%; height: 4px; background: rgb(16 185 129); bottom: -6px; }
  .title-comparador   { @apply inline-block relative; color: var(--heading); }
  .title-comparador::after { content: ""; position: absolute; left: 0; width: 100%; height: 4px; background: rgb(245 158 11); bottom: -6px; }
}

.btn-module-planificador {
    @apply inline-flex items-center justify-center font-semibold rounded-lg shadow-md transition-all duration-200
           focus:outline-none focus:ring-2 disabled:opacity-60 disabled:cursor-not-allowed px-4 py-2
           text-white bg-purple-600 hover:bg-purple-700 focus:ring-purple-600;
}

.btn-outline-planificador {
    @apply inline-flex items-center justify-center font-semibold rounded-lg px-4 py-2
           text-purple-300 border border-purple-500/40 hover:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400;
}

.input-module-planificador {
    @apply block w-full rounded-md bg-gray-50 text-gray-900 placeholder-gray-500
           border border-gray-300 ring-1 ring-inset ring-gray-300 shadow-sm
           focus:outline-none focus:ring-2 focus:ring-inset focus:ring-purple-500 focus:border-purple-500 sm:text-xs;
    height: 20px;
    line-height: 1;
    padding: 1px 4px;
    background-image: linear-gradient(rgb(147, 51, 234), rgb(147, 51, 234));
    background-repeat: no-repeat;
    background-size: 100% 2px;
    background-position: left calc(100% - 0px);
}

.page-planificador {
    @apply min-h-screen py-3;
}

.title-planificador {
    @apply inline-block relative; color: var(--heading);
}

.title-planificador::after {
    content: "";
    position: absolute;
    left: 0;
    width: 100%;
    height: 4px;
    background: rgb(147 51 234);
    bottom: -6px;
}

.reel-card--planificador {
    @apply outline-none ring-0;
}